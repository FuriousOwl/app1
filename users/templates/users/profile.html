{% extends 'base.html' %}
{% load static %}

{% block content %}
  <div class="profile-container">
    <div class="profile-photo">
      {% if user.profile.image %}
        <img src="{{ user.profile.image.url }}" alt="Profile Image">
      {% else %}
        <img src="{% static 'images/default-profile.png' %}" alt="Default Profile Image">
      {% endif %}
      <form method="post" enctype="multipart/form-data" action="{% url 'profile_image_upload' %}">
        {% csrf_token %}
        <div class="form-group">
          <label for="id_image">Upload new photo:</label>
          <input type="file" id="id_image" name="image">
        </div>
        <button type="submit" class="btn btn-success">Upload</button>
      </form>
    </div>
    <div class="profile-info">
      <h2>Profile Information</h2>
      <form method="post" action="{% url 'profile_update' %}">
        {% csrf_token %}
        <div class="form-group">
          <label for="id_username">Username:</label>
          <input type="text" id="id_username" name="username" value="{{ user.username }}">
        </div>
        <div class="form-group">
          <label for="id_first_name">First name:</label>
          <input type="text" id="id_first_name" name="first_name" value="{{ user.first_name }}">
        </div>
        <div class="form-group">
          <label for="id_last_name">Last name:</label>
          <input type="text" id="id_last_name" name="last_name" value="{{ user.last_name }}">
        </div>
        <div class="form-group">
          <label for="id_email">Email:</label>
          <input type="email" id="id_email" name="email" value="{{ user.email }}">
        </div>
        <div class="form-group">
          <label for="id_phone">Phone:</label>
          <input type="text" id="id_phone" name="phone" value="{{ user.profile.phone }}">
        </div>
        <button type="submit" class="btn btn-success">Save changes</button>
      </form>
    </div>
    <div class="profile-password">
      <h2>Change Password</h2>
      <form method="post" action="{% url 'password_change' %}">
        {% csrf_token %}
        <div class="form-group">
          <label for="id_old_password">Old Password:</label>
          <input type="password" id="id_old_password" name="old_password">
        </div>
        <div class="form-group">
          <label for="id_new_password1">New Password:</label>
          <input type="password" id="id_new_password1" name="new_password1">
        </div>
        <div class="form-group">
          <label for="id_new_password2">Confirm New Password:</label>
          <input type="password" id="id_new_password2" name="new_password2">
        </div>
        <button type="submit" class="btn btn-success">Change Password</button>
      </form>
    </div>
  </div>
{% endblock %}
